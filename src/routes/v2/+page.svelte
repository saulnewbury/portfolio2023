<script>
  import { onMount } from 'svelte'
  import { gsap } from 'gsap'
  import { pull, release } from '$lib/magnetism/magnetism.js'

  // Refs
  let section, target, portfolioOf

  onMount(() => {
    const q = gsap.utils.selector(section)
    gsap.to(q('.text')[0], { rotate: 100000, ease: 'linear', duration: 3000 })
  })

  function handleMouseMove(e) {
    pull(e, target, portfolioOf, true)
  }

  function handleMouseEnter() {
    const q = gsap.utils.selector(section)
    gsap.set(q('.arrow')[0], { transformOrigin: '50% 50%' })
    gsap.to(q('.arrow')[0], {
      rotate: 540
    })

    // magnetism(target, portfolioOf)
    document.addEventListener('mousemove', handleMouseMove)
  }

  function handleMouseLeave() {
    const q = gsap.utils.selector(section)
    gsap.to(q('.arrow')[0], {
      rotate: 0
    })
    // magnetism(target, portfolioOf)
    document.removeEventListener('mousemove', handleMouseMove)
    release(portfolioOf, false)
  }
</script>

<section class="hero" bind:this={section}>
  <h1 class="creative-developer">
    CREATIVE<br />
    DEVELOPER
  </h1>
  <h1 class="namesake-brand">
    SAUL<br />
    NEWBURY
  </h1>

  <!-- svelte-ignore a11y-no-static-element-interactions -->
  <div class="spinner-outer" on:mouseleave={handleMouseLeave}>
    <!-- svelte-ignore a11y-no-static-element-interactions -->
    <div
      bind:this={target}
      class="spinner-inner"
      on:mouseenter={() => {
        handleMouseEnter()
      }}
    >
      <svg
        bind:this={portfolioOf}
        viewBox="0 0 227 227"
        xml:space="preserve"
        style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5"
      >
        <path
          class="arrow"
          d="M98.541 127.613v-26.3c0-.1.1-.3.2-.3.2 0 .3.2.3.3v25.7l35.5-35.6c.1-.1.2 0 .3.1.1.1.2.2.1.3h-.1l-35.5 35.5h25.7c.1 0 .3.1.3.3 0 .1-.2.2-.3.2h-26.3s-.1 0-.1-.1c-.1 0-.1-.1-.1-.1Z"
        />
        <circle
          cx="10853.5"
          cy="13215.4"
          r="82.631"
          style="fill:none;stroke:#000;stroke-width:.37px"
          transform="translate(-14718.098 -17945.63) scale(1.3665)"
        />
        <path
          d="m10817.6 13147.1-7-17.3 5.8-2.3c1.4-.6 2.5-.8 3.6-.6 1.1.1 2 .5 2.7 1.2.7.6 1.3 1.5 1.7 2.5.4 1 .6 2 .5 3 0 1-.4 2-1 2.8-.7.8-1.7 1.5-3 2.1l-4.2 1.6-.7-1.8 4.1-1.7c.9-.3 1.6-.8 2-1.4.4-.5.6-1.1.7-1.7 0-.7-.1-1.4-.4-2.1-.3-.7-.7-1.2-1.1-1.7-.5-.4-1.1-.7-1.8-.8-.7-.1-1.5.1-2.4.5l-3.6 1.4 6.2 15.5-2.1.8ZM10851.7 13129.1c.3 1.9.1 3.7-.4 5.2s-1.4 2.7-2.5 3.6c-1.1.9-2.5 1.5-4 1.7-1.6.2-3-.1-4.3-.7-1.3-.6-2.4-1.6-3.3-3-.9-1.3-1.4-3-1.6-4.9-.3-2-.1-3.7.4-5.2s1.4-2.7 2.5-3.7c1.1-.9 2.5-1.4 4-1.6 1.6-.2 3 0 4.3.7 1.3.6 2.4 1.6 3.3 2.9.9 1.4 1.4 3 1.6 5Zm-2.1.2c-.2-1.6-.6-2.9-1.3-4-.6-1-1.4-1.8-2.4-2.2-1-.5-2-.6-3.1-.5-1.1.1-2.1.5-2.9 1.2-.9.7-1.5 1.6-1.9 2.8-.4 1.1-.5 2.5-.3 4.1.2 1.6.6 3 1.3 4 .6 1.1 1.5 1.8 2.4 2.3 1 .4 2 .6 3.1.5 1.1-.2 2.1-.6 2.9-1.2.9-.7 1.5-1.6 1.9-2.8.4-1.2.5-2.6.3-4.2ZM10861.5 13138.7l2.9-18.5 6.1 1c1.5.2 2.6.7 3.4 1.3.9.6 1.4 1.4 1.7 2.3.3 1 .4 2 .2 3-.1 1.1-.5 2.1-1.1 2.8-.6.8-1.3 1.4-2.3 1.7-1 .3-2.2.4-3.6.2l-5-.8.3-2 4.9.7c1 .2 1.8.2 2.5 0 .6-.2 1.1-.6 1.5-1.1.3-.4.6-1.1.7-1.8.1-.7.1-1.4-.1-2-.2-.6-.6-1.1-1.1-1.5-.6-.4-1.4-.7-2.3-.8l-3.9-.6-2.6 16.5-2.2-.4Zm9.9-6.9 3.1 9-2.5-.4-3.1-9 2.5.4ZM10887.6 13127.2l.8-1.8 12.7 5.3-.8 1.9-5.3-2.3-6.5 15.4-2.1-.9 6.5-15.3-5.3-2.3ZM10900.9 13152.2l11.3-14.9 8.8 6.7-1.2 1.6-7-5.3-3.8 5 6.4 4.8-1.3 1.6-6.3-4.8-5.1 6.7-1.8-1.4ZM10933.2 13171.2c-1.6 1.2-3.1 2-4.7 2.4-1.6.3-3 .2-4.4-.2-1.4-.5-2.6-1.4-3.5-2.6-1-1.2-1.6-2.6-1.7-4-.2-1.5.1-2.9.8-4.4.7-1.4 1.8-2.7 3.4-4 1.5-1.2 3.1-2 4.6-2.3 1.6-.3 3.1-.3 4.4.2 1.4.5 2.6 1.3 3.6 2.6.9 1.2 1.5 2.6 1.6 4 .2 1.4-.1 2.9-.8 4.3-.7 1.5-1.8 2.8-3.3 4Zm-1.4-1.7c1.3-1 2.2-2 2.7-3.1.6-1.1.8-2.2.7-3.3-.1-1.1-.5-2-1.2-2.9-.7-.9-1.6-1.5-2.6-1.9-1-.3-2.1-.4-3.3-.1-1.2.3-2.4.9-3.7 1.9-1.3 1-2.2 2.1-2.7 3.2-.6 1.1-.8 2.2-.7 3.3.1 1 .5 2 1.2 2.9.7.9 1.6 1.5 2.6 1.8 1 .4 2.1.4 3.3.1 1.2-.2 2.4-.9 3.7-1.9ZM10929.9 13184.5l17.2-7.4.9 2.1-15.4 6.6 3.4 7.9-1.8.8-4.3-10ZM10955.2 13200.3l-18.3 4.3-.5-2.2 18.2-4.3.6 2.2ZM10948.4 13229.1c-2 0-3.7-.3-5.1-1-1.5-.6-2.6-1.6-3.4-2.8-.8-1.2-1.2-2.6-1.3-4.2 0-1.5.4-2.9 1.1-4.2.8-1.2 1.9-2.2 3.3-2.9 1.4-.8 3.1-1.1 5.1-1.2 2 0 3.7.3 5.1 1 1.5.7 2.6 1.6 3.4 2.8.8 1.2 1.2 2.6 1.3 4.2 0 1.6-.4 3-1.1 4.2-.8 1.3-1.9 2.2-3.3 3-1.4.7-3.1 1.1-5.1 1.1Zm0-2.1c1.6-.1 2.9-.4 4-.9 1.1-.6 2-1.3 2.5-2.2.6-.9.9-1.9.8-3.1 0-1.1-.3-2.1-.9-3-.6-.9-1.4-1.6-2.5-2.1-1.2-.5-2.5-.7-4.2-.7-1.6 0-2.9.3-4 .9-1.2.5-2 1.2-2.5 2.2-.6.9-.9 1.9-.8 3 0 1.1.3 2.1.9 3 .6.9 1.4 1.6 2.5 2.1 1.2.5 2.5.8 4.2.8ZM10937.3 13267.4c-1.8-.8-3.2-1.8-4.3-3-1-1.2-1.6-2.5-1.9-4-.2-1.4 0-2.8.6-4.3.7-1.4 1.6-2.6 2.8-3.4 1.2-.8 2.6-1.2 4.2-1.3 1.6-.1 3.3.3 5.1 1.1 1.8.8 3.2 1.8 4.3 3 1 1.2 1.6 2.6 1.9 4 .2 1.4 0 2.9-.6 4.3-.7 1.5-1.6 2.6-2.8 3.4-1.2.8-2.6 1.2-4.2 1.3-1.6.1-3.3-.3-5.1-1.1Zm.9-2c1.4.7 2.8 1 4 1 1.3-.1 2.3-.4 3.2-1 .9-.6 1.6-1.4 2-2.4.5-1.1.6-2.1.4-3.2-.1-1-.6-2-1.4-2.9-.8-1-2-1.8-3.5-2.4-1.4-.7-2.8-1-4-.9-1.3 0-2.3.3-3.2.9-.9.6-1.6 1.4-2 2.5-.5 1-.6 2-.4 3.1.1 1 .6 2 1.4 3 .8.9 2 1.7 3.5 2.3ZM10924 13270.9l14.6 11.7-6.9 8.6-1.6-1.2 5.5-6.9-4.9-4-5 6.3-1.6-1.3 5-6.2-6.5-5.3 1.4-1.7ZM10899.6 13310.1c.6.8 1.3 1.2 2.3 1.2.9.1 1.8-.1 2.8-.7.7-.4 1.3-.9 1.7-1.4.4-.5.6-1.1.6-1.7.1-.5 0-1.1-.3-1.6-.2-.4-.6-.7-.9-.9-.4-.2-.8-.3-1.3-.4-.4 0-.8 0-1.3.1-.4.1-.8.2-1.1.3l-1.9.4c-.5.2-1.1.3-1.7.4-.6.1-1.2.1-1.9 0-.7 0-1.3-.3-1.9-.6-.6-.4-1.1-.9-1.6-1.7-.5-.9-.7-1.8-.6-2.7 0-1 .3-1.9 1-2.9.6-.9 1.5-1.7 2.7-2.4 1.2-.6 2.3-1 3.4-1.1 1-.1 2 .1 2.8.5.9.4 1.6 1 2.2 1.8l-2 1.2c-.4-.6-.9-1-1.5-1.2-.6-.2-1.2-.2-1.9-.1s-1.3.3-1.9.7c-.8.4-1.4.9-1.8 1.5-.5.6-.7 1.2-.8 1.8-.1.7 0 1.3.3 1.9.3.5.7.9 1.2 1.1.5.1 1.1.2 1.7.1.6-.1 1.2-.2 1.9-.3l2.3-.6c1.4-.3 2.7-.4 3.8-.1 1.1.3 2 .9 2.6 2 .5.9.8 1.9.6 2.8-.1 1-.4 1.9-1 2.7-.6.9-1.5 1.6-2.5 2.2-1 .6-2 .9-3 1-1.1.1-2-.1-2.8-.4-.9-.4-1.5-1-2-1.8l1.8-1.1ZM10882 13302.5l2.3-.6-1.8 19.8-2.2.6-11.4-16.3 2.3-.6 9.4 13.8h.1l1.3-16.7Zm1 7.3-9.1 2.4-.5-1.9 9.1-2.4.5 1.9ZM10848.9 13325.5l-2.2-.1.1-12.4c0-1.2.3-2.4.9-3.4.6-1 1.5-1.7 2.6-2.3 1-.6 2.3-.8 3.7-.8 1.5 0 2.8.3 3.8.9 1.1.6 1.9 1.4 2.5 2.4.6 1 .9 2.1.8 3.4l-.1 12.4h-2.2l.1-12.2c0-1-.2-1.8-.6-2.5-.3-.7-.9-1.3-1.6-1.7-.8-.4-1.6-.6-2.7-.6-1 0-1.9.2-2.6.6-.8.4-1.3.9-1.7 1.6-.4.7-.7 1.5-.7 2.4l-.1 12.3ZM10837.7 13305.2l-4.9 18.1-2.2-.6 4.5-16.1-8.3-2.3.5-1.9 10.4 2.8ZM10786 13299.3l11.5-14.7 1.7 1.3-1.1 17.8.2.1 9-11.6 1.8 1.4-11.6 14.8-1.7-1.4 1.2-17.8-.2-.1-9.1 11.6-1.7-1.4ZM10791.1 13277.8l-14.9 11.3-6.7-8.9 1.6-1.2 5.4 7.1 5-3.8-5-6.7 1.6-1.2 5 6.7 5.1-3.8-5.5-7.3 1.7-1.2 6.7 9ZM10778.4 13258.3l-15.7 11.3-.8-2.1 12.9-9-.1-.1-15.6 1.6-.9-2.4 12.9-9-.1-.1-15.6 1.7-.8-2.1 19.3-1.9.8 2.2-12.5 9v.2l15.4-1.4.8 2.1ZM10771.3 13233.8l-18.7 1-.3-6.4c-.1-1.3.1-2.4.5-3.3.4-.8.9-1.5 1.7-1.9.7-.5 1.5-.7 2.4-.8.8 0 1.5.1 2 .4.6.2 1 .6 1.3 1 .4.4.6.9.8 1.4h.2c0-.5.1-1.1.5-1.7.3-.6.8-1.1 1.5-1.5.6-.4 1.5-.7 2.4-.7 1-.1 1.8.1 2.6.5.8.3 1.4 1 1.9 1.9.5.8.8 2 .8 3.5l.4 6.6Zm-2.1-2.1-.3-4.4c-.1-1.5-.4-2.5-1-3.1-.6-.6-1.3-.9-2.1-.8-.7 0-1.3.2-1.8.6-.5.3-.9.8-1.2 1.4-.3.6-.4 1.3-.4 2.1l.3 4.5 6.5-.3Zm-8.5.4-.2-4.1c-.1-.7-.2-1.3-.5-1.8s-.7-.9-1.2-1.2c-.5-.3-1.1-.5-1.8-.4-.8 0-1.5.3-2 .9-.6.6-.8 1.5-.7 2.8l.2 4.2 6.2-.4ZM10755.3 13196.8l.5-2.2 12.1 2.6c1.2.3 2.3.8 3.2 1.6.8.8 1.4 1.7 1.8 2.9.3 1.2.3 2.5 0 3.9s-.8 2.6-1.6 3.5c-.8.9-1.7 1.6-2.8 2-1.1.3-2.3.4-3.6.1l-12.1-2.5.5-2.2 11.9 2.5c.9.2 1.7.2 2.5-.1.8-.2 1.5-.7 2-1.3.6-.6.9-1.5 1.1-2.5.3-1 .2-1.9 0-2.7-.3-.8-.7-1.4-1.3-2-.6-.5-1.4-.9-2.3-1.1l-11.9-2.5ZM10777.3 13189.7l-16.6-8.7 2.9-5.5c.7-1.2 1.4-2.2 2.3-2.8.9-.6 1.8-.8 2.8-.8.9 0 1.9.2 2.9.7 1 .6 1.7 1.2 2.3 2 .5.8.8 1.7.8 2.7 0 1.1-.3 2.2-1 3.5l-2.3 4.5-1.8-1 2.3-4.4c.4-.9.7-1.6.7-2.3 0-.7-.2-1.3-.5-1.8-.4-.4-.9-.9-1.5-1.2-.7-.4-1.3-.5-2-.6-.6 0-1.2.2-1.7.6-.6.4-1.1 1-1.6 1.9l-1.8 3.5 14.8 7.8-1 1.9Zm-3.4-11.6 9.5-.1-1.2 2.3-9.5.1 1.2-2.3ZM10772.4 13160.9l1.7-1.9 10 1.9.1-.1-3.2-9.6 1.7-2 3.9 12.3 5.8 5.1-1.5 1.7-5.8-5.1-12.7-2.3Z"
          style="fill-rule:nonzero"
          transform="matrix(.92789 0 0 .92788 -9958.893 -12155.98)"
        />
      </svg>
    </div>
  </div>
</section>

<style>
  section {
    height: 100vh;
    font-family: GujaratiSangamMN;
  }

  h1 {
    position: absolute;
    line-height: 1.1;
    font-size: 120px;
    font-weight: 700;
    mix-blend-mode: color-burn;
  }

  h1.creative-developer {
    left: var(--gutter-sm);
    top: 80px;
  }

  h1.namesake-brand {
    right: var(--gutter-sm);
    bottom: 20px;
    text-align: right;
  }

  .spinner-outer {
    cursor: pointer;
    position: absolute;
    top: 40%;
    left: calc(var(--gutter-lg) * 1.5);
    width: 360px;
    height: 360px;
    background-color: palegreen;
  }

  .spinner-inner {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 160px;
    height: 160px;
    background-color: palegoldenrod;
  }
  svg path.arrow {
    transform-origin: 50% 50%;
  }
</style>
